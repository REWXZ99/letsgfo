<!DOCTYPE html>
<html lang="en" class="cyberpunk-theme">
<%- include('../partials/head', { 
    title: typeof title !== 'undefined' ? title : '500 - Server Error',
    headContent: typeof headContent !== 'undefined' ? headContent : '',
    csrfToken: typeof csrfToken !== 'undefined' ? csrfToken : ''
}) %>
<body>
    <!-- Cyberpunk Scan Lines Overlay -->
    <div class="scan-lines"></div>
    
    <!-- Red Grid Overlay -->
    <div class="grid-overlay"></div>
    
    <!-- Main Container -->
    <div class="cyberpunk-container">
        <!-- Header -->
        <%- include('../partials/header', {
            currentPath: typeof currentPath !== 'undefined' ? currentPath : '/',
            isAuthenticated: false,
            admin: null,
            csrfToken: typeof csrfToken !== 'undefined' ? csrfToken : ''
        }) %>
        
        <!-- Main Content -->
        <main class="cyberpunk-main">
            <div class="error-section">
                <div class="error-container">
                    <div class="error-code glitch-text">500</div>
                    <h1 class="error-title">Server Error</h1>
                    
                    <p class="error-message">
                        Something went wrong on our end. Our team has been notified and is working on a fix.
                    </p>
                    
                    <% if (typeof env !== 'undefined' && env === 'development' && typeof error !== 'undefined' && error) { %>
                        <div class="error-details">
                            <strong>Error Details:</strong>
                            <pre style="margin-top: 0.5rem; overflow-x: auto;"><%= error.stack %></pre>
                        </div>
                    <% } %>
                    
                    <div class="error-actions">
                        <a href="/" class="cyberpunk-btn">
                            <i class="fas fa-home"></i>
                            <span>Back to Home</span>
                        </a>
                        <button onclick="location.reload()" class="cyberpunk-btn btn-outline">
                            <i class="fas fa-redo"></i>
                            <span>Try Again</span>
                        </button>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <%- include('../partials/footer') %>
    </div>
    
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="/js/main.js"></script>
</body>
</html>
